<html>

<head>
    <title>BlueTube - Flag5</title>
    <link rel="stylesheet" href="/styles.css">
</head>

<body>
    <nav>
        <div class="nav-button" onclick="window.location = '/';">
            <h1 class="nav-text" style="font-size: 20pt;">BlueTube</h1>
        </div>
        <div class="nav-button" onclick="window.location = '/flag1.html';">
            <h1 class="nav-text">Flag1</h1>
        </div>
        <div class="nav-button" onclick="window.location = '/flag2.html';">
            <h1 class="nav-text">Flag2</h1>
        </div>
        <div class="nav-button" onclick="window.location = '/flag3.html';">
            <h1 class="nav-text">Flag3</h1>
        </div>
        <div class="nav-button" onclick="window.location = '/flag4.html';">
            <h1 class="nav-text">Flag4</h1>
        </div>
        <div class="nav-button" onclick="window.location = '/flag5.html';">
            <h1 class="nav-text">Flag5</h1>
        </div>
    </nav>

    <video id="videoPlayer" preload="auto" onclick="PlayPause()">
        <source id="videoSource" type="video/mp4">
    </video>
</body>

<script>
    // Code designed to block right click so you can't get to the dev tools ;)
    document.addEventListener("DOMContentLoaded", async () => {
        document.addEventListener("contextmenu", function (event) {
            event.preventDefault();
        });
    });

    // Plays/pauses the video when you click
    let isPaused = false;
    async function PlayPause() {
        const videoPlayer = document.querySelector("#videoPlayer");
        if (videoPlayer.paused) {
            isPaused = false;
            videoPlayer.play();
            return;
        }
        isPaused = !isPaused;
        if (isPaused) {
            videoPlayer.playbackRate = 0;
            videoPlayer.muted = true;
        } else {
            videoPlayer.playbackRate = 1;
            videoPlayer.muted = false;
        }
    }

    // Restarts the video when it ends so the video loops
    document.addEventListener("DOMContentLoaded", async () => {
        const videoPlayer = document.querySelector("#videoPlayer");
        videoPlayer.addEventListener("ended", () => {
            videoPlayer.currentTime = 0;
            videoPlayer.play();
        });
    });
</script>

</html>

<script>
    document.addEventListener("DOMContentLoaded", async () => {
        const hlsJsResponse = await fetch("https://cdn.jsdelivr.net/npm/hls.js@latest");
        const hlsJs = await hlsJsResponse.text();
        eval(hlsJs);
        const videoPlayer = document.querySelector("#videoPlayer");
        const videoSource = document.querySelector("#videoSource");
        const videoUrl = "/5-837b5eaf-d545-4b9b-9b0c-222c23e60067.m3u8";
        if (Hls.isSupported()) {
            var hls = new Hls();
            hls.loadSource(videoUrl);
            hls.attachMedia(videoPlayer);
        }
        else if (video.canPlayType("application/vnd.apple.mpegurl")) {
            videoSource.src = videoUrl;
        }
        else {
            alert("ERROR: Your browser does not support HLS.");
            return;
        }
        videoPlayer.load();
    });
    document.currentScript.remove();
</script>